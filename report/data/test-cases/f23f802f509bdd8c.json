{"uid":"f23f802f509bdd8c","name":"test_approve[login0]","fullName":"test_招聘审批流程#test_approve","historyId":"dd792a124653c2b670c78eec632f7926","time":{"start":1753511782160,"stop":1753511782160,"duration":0},"status":"broken","statusMessage":"IndexError: list index out of range","statusTrace":"driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"2f2a0e940d01b645c6e50266e5b269d1\")>\nrequest = <SubRequest 'login' for <Function test_approve[login0]>>\n\n    @pytest.fixture(scope=\"function\")\n    def login(driver,request):\n        username = request.param.get(\"username\")\n        password = request.param.get(\"password\")\n        driver.get(url)\n        wait = WebDriverWait(driver, 20)\n        try:\n            # 验证码处理\n            captcha_img = wait.until(EC.presence_of_element_located(\n                (By.XPATH, '//*[@id=\"app\"]/div[@class=\"login-container\"]/div[@class=\"con-in\"]/form/div[2]/div[@class=\"el-form-item is-required\"]/div[@class=\"el-form-item__content\"]/img[@class=\"cap_img\"]')))\n            captcha_data = captcha_img.get_attribute(\"src\").split(\",\")[1]\n            image_bytes = base64.b64decode(captcha_data)\n            img = cv2.cvtColor(np.array(Image.open(io.BytesIO(image_bytes))), cv2.COLOR_RGB2GRAY)\n            img = cv2.threshold(img, 0, 255, cv2.THRESH_BINARY + cv2.THRESH_OTSU)[1]\n            img = cv2.medianBlur(img, 3)\n            text = pytesseract.image_to_string(img, config=r'--psm 8 --oem 3').strip()\n            # 输入凭据\n            wait.until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"app\"]/div[@class=\"login-container\"]/div[@class=\"con-in\"]/form/div[2]/div[1]/div[@class=\"el-form-item__content\"]/div[@class=\"el-input\"]/input'))).send_keys(username)\n            wait.until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"app\"]/div[@class=\"login-container\"]/div[@class=\"con-in\"]/form/div[2]/div[2]/div[@class=\"el-form-item__content\"]/div[@class=\"el-input\"]/input'))).send_keys(password)\n            wait.until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"app\"]/div[@class=\"login-container\"]/div[@class=\"con-in\"]/form/div[2]/div[3]/div[@class=\"el-form-item__content\"]/div[@class=\"el-input\"]/input'))).send_keys(text)\n            wait.until(EC.element_to_be_clickable((By.XPATH, '//*[@id=\"app\"]/div/div/form/div[2]/button'))).click()\n            # 验证登录\n            time.sleep(5)\n            try:\n                error = driver.find_element(By.CSS_SELECTOR, \".el-message__content\").text\n                if \"验证码错误\" in error:\n                    pytest.fail(\"验证码识别错误\")\n            except:\n                pass\n        except Exception as e:\n            # 截图并附加到 Allure 报告\n            allure.attach(driver.get_screenshot_as_png(), name=\"登录失败截图\",attachment_type=allure.attachment_type.PNG)\n>           raise e\n\nC:\\Users\\Administrator\\Desktop\\test\\test_招聘审批流程.py:76: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"2f2a0e940d01b645c6e50266e5b269d1\")>\nrequest = <SubRequest 'login' for <Function test_approve[login0]>>\n\n    @pytest.fixture(scope=\"function\")\n    def login(driver,request):\n        username = request.param.get(\"username\")\n        password = request.param.get(\"password\")\n        driver.get(url)\n        wait = WebDriverWait(driver, 20)\n        try:\n            # 验证码处理\n            captcha_img = wait.until(EC.presence_of_element_located(\n                (By.XPATH, '//*[@id=\"app\"]/div[@class=\"login-container\"]/div[@class=\"con-in\"]/form/div[2]/div[@class=\"el-form-item is-required\"]/div[@class=\"el-form-item__content\"]/img[@class=\"cap_img\"]')))\n>           captcha_data = captcha_img.get_attribute(\"src\").split(\",\")[1]\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE           IndexError: list index out of range\n\nC:\\Users\\Administrator\\Desktop\\test\\test_招聘审批流程.py:54: IndexError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":false,"beforeStages":[{"name":"driver","time":{"start":1753511782161,"stop":1753511784784,"duration":2623},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"stepsCount":0},{"name":"login","time":{"start":1753511784784,"stop":1753511787162,"duration":2378},"status":"broken","statusMessage":"IndexError: list index out of range\n","statusTrace":"  File \"D:\\t\\.venv\\Lib\\site-packages\\pluggy\\_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"D:\\t\\.venv\\Lib\\site-packages\\pluggy\\_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"D:\\t\\.venv\\Lib\\site-packages\\_pytest\\setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"D:\\t\\.venv\\Lib\\site-packages\\pluggy\\_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n  File \"D:\\t\\.venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 1195, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"D:\\t\\.venv\\Lib\\site-packages\\_pytest\\fixtures.py\", line 929, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"C:\\Users\\Administrator\\Desktop\\test\\test_招聘审批流程.py\", line 76, in login\n    raise e\n  File \"C:\\Users\\Administrator\\Desktop\\test\\test_招聘审批流程.py\", line 54, in login\n    captcha_data = captcha_img.get_attribute(\"src\").split(\",\")[1]\n                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^\n","steps":[],"attachments":[{"uid":"a9f3bce34ac2ea26","name":"登录失败截图","source":"a9f3bce34ac2ea26.png","type":"image/png","size":28247}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false,"stepsCount":0},{"name":"navigate_to_approval","time":{"start":1753511803637,"stop":1753511807399,"duration":3762},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"afterStages":[{"name":"driver::0","time":{"start":1753511789290,"stop":1753511792090,"duration":2800},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false,"stepsCount":0}],"labels":[{"name":"suite","value":"test_招聘审批流程"},{"name":"host","value":"JH-KF10"},{"name":"thread","value":"19900-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_招聘审批流程"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"login","value":"{'username': 'JH-03173', 'password': '123456'}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c49e50ff63d4af9a","status":"broken","statusDetails":"selenium.common.exceptions.TimeoutException: Message: \nStacktrace:\n\tGetHandleVerifier [0x0x7ff7e301fea5+79173]\n\tGetHandleVerifier [0x0x7ff7e301ff00+79264]\n\t(No symbol) [0x0x7ff7e2dd9e5a]\n\t(No symbol) [0x0x7ff7e2e30586]\n\t(No symbol) [0x0x7ff7e2e3083c]\n\t(No symbol) [0x0x7ff7e2e84247]\n\t(No symbol) [0x0x7ff7e2e589af]\n\t(No symbol) [0x0x7ff7e2e8100d]\n\t(No symbol) [0x0x7ff7e2e58743]\n\t(No symbol) [0x0x7ff7e2e214c1]\n\t(No symbol) [0x0x7ff7e2e22253]\n\tGetHandleVerifier [0x0x7ff7e32ea2dd+3004797]\n\tGetHandleVerifier [0x0x7ff7e32e472d+2981325]\n\tGetHandleVerifier [0x0x7ff7e3303380+3107360]\n\tGetHandleVerifier [0x0x7ff7e303aa2e+188622]\n\tGetHandleVerifier [0x0x7ff7e30422bf+219487]\n\tGetHandleVerifier [0x0x7ff7e3028df4+115860]\n\tGetHandleVerifier [0x0x7ff7e3028fa9+116297]\n\tGetHandleVerifier [0x0x7ff7e300f558+11256]\n\tBaseThreadInitThunk [0x0x7ffab4797374+20]\n\tRtlUserThreadStart [0x0x7ffab63dcc91+33]","time":{"start":1753510935577,"stop":1753510955896,"duration":20319}}],"categories":[{"name":"Test defects","matchedStatuses":[]}],"tags":[]},"source":"f23f802f509bdd8c.json","parameterValues":["{'username': 'JH-03173', 'password': '123456'}"]}